!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("angular-plotly.js"),require("plotly.js/dist/plotly.js"),require("chartjs-plugin-datalabels"),require("ng2-charts"),require("d3"),require("chartjs-plugin-waterfall"),require("@angular/core"),require("chart.js")):"function"==typeof define&&define.amd?define("chart-lib",["exports","@angular/common","angular-plotly.js","plotly.js/dist/plotly.js","chartjs-plugin-datalabels","ng2-charts","d3","chartjs-plugin-waterfall","@angular/core","chart.js"],e):e(t["chart-lib"]={},t.ng.common,t.angularPlotly_js,t.PlotlyJS,t.pluginDataLabels,t.ng2Charts,t.d3$1,t.waterfallPlugin,t.ng.core,t.Chart)}(this,function(t,e,a,r,i,o,n,s,l,h){"use strict";var c=function(){function t(){}return t.decorators=[{type:l.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=l.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),p=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"lib-chart-lib",template:"\n    <p>\n      chart-lib works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),d=function(){function t(){this.isDisplayDataLabel=!1,this.dataLabelAnchor="center",this.dataLabelAlign="center",this.yAxisLeftLabel="",this.yAxisRightLabel="",this.xAxisLabel="",this.isDisplayLegend=!0,this.legendPosition="top",this.isLegendPointStyle=!1,this.isStacked=!1,this.isDisplayYaxisLeftGrid=!0,this.isDisplayYaxisRightGrid=!1,this.isDisplayXaxisGrid=!0,this.fontFamily="Helvetica Neue",this.fontSize=12,this.fontColor="rgba(0,0,0,0.5)",this.gridColor="rgba(0,0,0,0.1)",this.isHorizontalBar=!1}return t.populateChartConfig=function(t,e){if(e.isDisplayDataLabel){var a={display:!0,anchor:e.dataLabelAnchor,align:e.dataLabelAlign};t.plugins={dataLabels:a}}if(0<e.yAxisLeftLabel.length&&(t.scales.yAxes[0].scaleLabel={display:!0,labelString:e.yAxisLeftLabel},t.scales.yAxes[0].gridLines={display:e.isDisplayYaxisLeftGrid,color:e.gridColor},t.scales.yAxes[0].ticks={fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor}),0<e.yAxisRightLabel.length&&1==t.scales.yAxes.length&&t.scales.yAxes.push({position:"right",gridLines:{display:e.isDisplayYaxisRightGrid},scaleLabel:{display:!0,labelString:e.yAxisRightLabel},ticks:{fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor}}),0<e.xAxisLabel.length&&(t.scales.xAxes[0].scaleLabel={display:!0,labelString:e.xAxisLabel},t.scales.xAxes[0].ticks={fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor}),e.isDisplayLegend){var r="top";"top"==e.legendPosition?r="top":"bottom"==e.legendPosition?r="bottom":"left"==e.legendPosition?r="left":"right"==e.legendPosition&&(r="right"),t.legend={display:!0,position:r}}else t.legend={display:!1};return e.isLegendPointStyle&&(t.legend.labels||(t.legend.labels={}),t.legend.labels.usePointStyle=!0),e.isStacked&&(t.scales.yAxes[0].stacked=!0,t.scales.xAxes[0].stacked=!0),t},t}(),C=function(){function t(){this.globalColors=[{backgroundColor:"rgba(36,123,160,0.6)",borderColor:"rgba(36,123,160,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)",cubicInterpolationMode:"monotone"},{backgroundColor:"rgba(112,193,179,0.6)",borderColor:"rgba(112,193,179,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)"},{backgroundColor:"rgba(235,84,124,0.6)",borderColor:"rgba(235,84,124,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)"},{backgroundColor:"rgba(229,227,24,0.6)",borderColor:"rgba(229,227,24,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)"},{backgroundColor:"rgba(204,194,16,0.6)",borderColor:"rgba(121,115,9,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)"},{backgroundColor:"rgba(107,76,154,0.6)",borderColor:"rgba(69,49,99,1.0)",borderWidth:1,pointRadius:1,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1.0)"}]}return t.FONT_COLOR="rgba(0,0,0,0.5)",t.GRID_COLOR="rgba(0,0,0,0.1)",t.globalBackgroundColors=["rgba(36,123,160,0.6)","rgba(112,193,179,0.6)","rgba(235,84,124,0.6)","rgba(229,227,24,0.6)","rgba(204,194,16,0.6)","rgba(107,76,154,0.6)"],t}(),u=function(){function t(){this.barChartOptions={responsive:!0,scales:{xAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}],yAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}]},plugins:{datalabels:{anchor:"end",align:"end"}}},this.scatterChartOptions={responsive:!0,scales:{xAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}],yAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}]},plugins:{datalabels:{display:!1}}},this.pieChartOptions={responsive:!0,plugins:{datalabels:{formatter:function(t,e){return e.chart.data.labels[e.dataIndex]}}}},this.waterfallChartOptions={xaxis:{type:"category",automargin:!0},yaxis:{type:"linear",automargin:!0},margin:{t:60},font:{family:t.FONT_FAMILY,size:t.FONT_SIZE,color:C.FONT_COLOR},autosize:!0,showlegend:!1,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"},this.boxPlotChartOptions={xaxis:{type:"category",showgrid:!1,automargin:!0},yaxis:{type:"linear",showgrid:!0,automargin:!0,gridcolor:C.GRID_COLOR,gridwidth:1},font:{family:t.FONT_FAMILY,size:t.FONT_SIZE,color:C.FONT_COLOR},autosize:!0,showlegend:!1,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"},this.lineChartOptions={responsive:!0,plugins:{datalabels:{display:!0,anchor:"end",align:"end"}},scales:{xAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}],yAxes:[{id:"y-axis-0",position:"left",gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}},{id:"y-axis-1",position:"right",gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}]},annotation:{}},this.combinedChartOptions={responsive:!0,plugins:{datalabels:{display:!1}},scales:{xAxes:[{gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}],yAxes:[{id:"y-axis-0",position:"left",gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}},{id:"y-axis-1",position:"right",gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}]},annotation:{}},this.variableWidthChartOptions={responsive:!0,legend:{display:!1},plugins:{datalabels:{display:!1}},scales:{xAxes:[{scaleLabel:{display:!0},gridLines:{color:C.GRID_COLOR},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}}],yAxes:[{position:"left",gridLines:{display:!1},ticks:{fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontColor:C.FONT_COLOR}},{position:"right",gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1}}]}}}return t.prototype.peityPieOptions=function(t,e){return{delimiter:null,fill:C.globalBackgroundColors,height:e,radius:8,width:t}},t.prototype.peityDonutOptions=function(t,e){return{delimiter:null,fill:C.globalBackgroundColors,height:e,innerRadius:null,radius:8,width:t}},t.prototype.peityLineOptions=function(t,e){return{delimiter:",",fill:C.globalBackgroundColors[0],max:null,min:0,stroke:C.globalBackgroundColors[1],strokeWidth:1,height:e,width:t}},t.prototype.peityBarOptions=function(t,e){return{delimiter:",",fill:[C.globalBackgroundColors[0]],max:null,min:0,padding:.1,height:e,width:t}},t.FONT_FAMILY="Helvetica Neue",t.FONT_SIZE=12,t}(),f=function(){function t(){this.barChartOptions={},this.barChartLabels=[],this.barChartLegend=!0,this.barChartData=[],this.barChartPlugins=[],this.barChartColors=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter,this.chartType="bar"}return t.prototype.ngOnInit=function(){this.barChartColors&&0!=Object.keys(this.barChartColors).length||(this.barChartColors=(new C).globalColors),this.barChartOptions&&0!=Object.keys(this.barChartOptions).length||(this.barChartOptions=(new u).barChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.simpleChartConfig.isHorizontalBar?this.chartType="horizontalBar":this.chartType="bar",this.barChartOptions=d.populateChartConfig(this.barChartOptions,this.simpleChartConfig))),this.barChartPlugins.push(i);this.barChartPlugins.push({beforeInit:function(t,e){t.legend.afterFit=function(){this.height=this.height+20}}})},t.prototype.chartClicked=function(t){var e=t.event,a=t.active;0<a.length&&this.chartClick.emit(a[0]);$("#barChart")[0].getContext("2d");var r=this.chart.chart,i=r.chartArea.bottom,o=(r.height,r.scales["x-axis-0"].width),n=$("#barChart").offset().top-$(window).scrollTop();if(e.pageY>i+n){var s=r.scales["x-axis-0"].ticks.length,l=r.scales["x-axis-0"].paddingLeft,h=(o-l-r.scales["x-axis-0"].paddingRight)/s,c=(e.offsetX-l-r.scales["y-axis-0"].width)/h;if(0<c&&c<s){c=Math.floor(c);var p=this.barChartLabels[c];this.labelClick.emit(p)}}},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-bar-chart",template:'\n    <div style="display: block">\n      <canvas #chart id="barChart" baseChart\n        [datasets]="barChartData"\n        [labels]="barChartLabels"\n        [options]="barChartOptions"\n        [plugins]="barChartPlugins"\n        [colors]="barChartColors" \n        [legend]="barChartLegend"\n        [chartType]="chartType"\n        (chartHover)="chartHovered($event)"\n        (chartClick)="chartClicked($event)">\n      </canvas>\n    </div>\n',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={barChartOptions:[{type:l.Input}],barChartLabels:[{type:l.Input}],barChartLegend:[{type:l.Input}],barChartData:[{type:l.Input}],barChartPlugins:[{type:l.Input}],barChartColors:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}],chart:[{type:l.ViewChild,args:[o.BaseChartDirective]}]},t}(),g=function(){function t(){this.boxPlotChartOptions={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter,this.boxPlotData=[],this.boxPlotChartConfig={displayModeBar:!1,displaylogo:!1,modeBarButtonsToRemove:["pan2d","lasso2d"]}}return t.prototype.ngOnInit=function(){var a=this;this.boxPlotChartOptions&&0!=Object.keys(this.boxPlotChartOptions).length||(this.boxPlotChartOptions=(new u).boxPlotChartOptions),this.boxPlotChartData.forEach(function(t){var e={y:t.yValues,name:t.name,type:"box",boxpoints:t.boxpoints,marker:{color:t.markerColor}};a.boxPlotData.push(e)})},t.prototype.chartClicked=function(t){t instanceof MouseEvent||this.chartClick.emit(t)},t.prototype.chartHovered=function(t){this.chartHover.emit(t)},t.prototype.chartAfterPlotted=function(t){var e=this;n.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){e.labelClick.emit(t.text)})},t.decorators=[{type:l.Component,args:[{selector:"lib-box-plot-chart",template:'<div>\n  <plotly-plot [data]="boxPlotData" [layout]="boxPlotChartOptions" [config]="boxPlotChartConfig" \n    [revision]="0" [debug]="true" [useResizeHandler]="true"\n    (click)="chartClicked($event)" (hover)="chartHovered($event)" (afterPlot)="chartAfterPlotted($event)">\n  </plotly-plot>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={boxPlotChartOptions:[{type:l.Input}],boxPlotChartData:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}]},t}(),b=function R(){this.markerColor=C.globalBackgroundColors[0],this.boxpoints=!1},y=function(){function t(){this.combinedChartOptions={},this.combinedChartLabels=[],this.combinedChartLegend=!0,this.combinedChartData=[],this.combinedChartPlugins=[],this.combinedChartColors=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter}return t.prototype.ngOnInit=function(){this.combinedChartColors&&0!=Object.keys(this.combinedChartColors).length||(this.combinedChartColors=(new C).globalColors),this.combinedChartOptions&&0!=Object.keys(this.combinedChartOptions).length||(this.combinedChartOptions=(new u).barChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.combinedChartOptions=d.populateChartConfig(this.combinedChartOptions,this.simpleChartConfig))),this.combinedChartPlugins.push(i);this.combinedChartPlugins.push({beforeInit:function(t,e){t.legend.afterFit=function(){this.height=this.height+20}}})},t.prototype.chartClicked=function(t){var e=t.event,a=t.active;0<a.length&&this.chartClick.emit(a[0]);$("#combinedChart")[0].getContext("2d");var r=this.chart.chart,i=r.chartArea.bottom,o=(r.height,r.scales["x-axis-0"].width),n=$("#combinedChart").offset().top-$(window).scrollTop();if(e.pageY>i+n){var s=r.scales["x-axis-0"].ticks.length,l=r.scales["x-axis-0"].paddingLeft,h=(o-l-r.scales["x-axis-0"].paddingRight)/s,c=(e.offsetX-l-r.scales["y-axis-0"].width)/h;if(0<c&&c<s){c=Math.floor(c);var p=this.combinedChartLabels[c];this.labelClick.emit(p)}}},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-combined-category-chart",template:'\n    <div style="display: block">\n        <canvas #chart id="combinedChart" baseChart\n          [datasets]="combinedChartData"\n          [labels]="combinedChartLabels"\n          [options]="combinedChartOptions"\n          [plugins]="combinedChartPlugins"\n          [colors]="combinedChartColors" \n          [legend]="combinedChartLegend"\n          [chartType]="\'bar\'"\n          (chartHover)="chartHovered($event)"\n          (chartClick)="chartClicked($event)">\n        </canvas>\n      </div>\n  ',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={combinedChartOptions:[{type:l.Input}],combinedChartLabels:[{type:l.Input}],combinedChartLegend:[{type:l.Input}],combinedChartData:[{type:l.Input}],combinedChartPlugins:[{type:l.Input}],combinedChartColors:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}],chart:[{type:l.ViewChild,args:[o.BaseChartDirective]}]},t}(),v=function(){function t(){this.combinedChartOptions={},this.combinedChartLabels=[],this.combinedChartLegend=!0,this.combinedChartData=[],this.combinedChartPlugins=[],this.combinedChartColors=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter,this.combinedChartColors&&0!=Object.keys(this.combinedChartColors).length||(this.combinedChartColors=(new C).globalColors),this.combinedChartOptions&&0!=Object.keys(this.combinedChartOptions).length||(this.combinedChartOptions=(new u).combinedChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.combinedChartOptions=d.populateChartConfig(this.combinedChartOptions,this.simpleChartConfig)))}return t.prototype.ngOnInit=function(){this.combinedChartPlugins.push(i)},t.prototype.ngOnChanges=function(t){if(t.combinedChartData){if(null==this.combinedChartData)return;this.chart.update()}},t.prototype.chartClicked=function(t){var e=t.event,a=t.active;0<a.length&&this.chartClick.emit(a[0]);$("#combinedChart")[0].getContext("2d");var r=this.chart.chart,i=r.chartArea.bottom,o=(r.height,r.scales["x-axis-0"].width),n=$("#combinedChart").offset().top-$(window).scrollTop();if(e.pageY>i+n){var s=r.scales["x-axis-0"].ticks.length,l=r.scales["x-axis-0"].paddingLeft,h=(o-l-r.scales["x-axis-0"].paddingRight)/s,c=(e.offsetX-l-r.scales["y-axis-0"].width)/h;if(0<c&&c<s){c=Math.floor(c);var p=this.combinedChartLabels[c];this.labelClick.emit(p)}}},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-combined-measure-chart",template:'\n    <div style="display: block">\n        <canvas #chart id="combinedChart" baseChart\n          [datasets]="combinedChartData"\n          [labels]="combinedChartLabels"\n          [options]="combinedChartOptions"\n          [plugins]="combinedChartPlugins"\n          [colors]="combinedChartColors" \n          [legend]="combinedChartLegend"\n          [chartType]="\'bubble\'"\n          [plugins]="combinedChartPlugins"\n          (chartHover)="chartHovered($event)"\n          (chartClick)="chartClicked($event)">\n        </canvas>\n      </div>\n  ',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={combinedChartOptions:[{type:l.Input}],combinedChartLabels:[{type:l.Input}],combinedChartLegend:[{type:l.Input}],combinedChartData:[{type:l.Input}],combinedChartPlugins:[{type:l.Input}],combinedChartColors:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}],chart:[{type:l.ViewChild,args:[o.BaseChartDirective]}]},t}(),m=function(){function t(){this.lineChartOptions={},this.lineChartLegend=!0,this.lineChartColors=[],this.lineChartPlugins=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter,this.lineChartColors&&0!=Object.keys(this.lineChartColors).length||(this.lineChartColors=(new C).globalColors,this.lineChartColors.forEach(function(t){t.fill=!1,t.cubicInterpolationMode="monotone",t.lineTension=1,t.pointRadius=3,t.pointHoverRadius=3})),this.lineChartOptions&&0!=Object.keys(this.lineChartOptions).length||(this.lineChartOptions=(new u).lineChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.lineChartOptions=d.populateChartConfig(this.lineChartOptions,this.simpleChartConfig)))}return t.prototype.ngOnInit=function(){this.lineChartPlugins.push(i);this.lineChartPlugins.push({beforeInit:function(t,e){t.legend.afterFit=function(){this.height=this.height+20}}})},t.prototype.ngOnChanges=function(t){if(t.lineChartData){if(null==this.lineChartData)return;this.chart.update()}},t.prototype.update=function(){this.chart.update()},t.prototype.chartClicked=function(t){var e=t.event,a=t.active;0<a.length&&this.chartClick.emit(a[0]);$("#lineChart")[0].getContext("2d");var r=this.chart.chart,i=r.chartArea.bottom,o=(r.height,r.scales["x-axis-0"].width),n=$("#lineChart").offset().top-$(window).scrollTop();if(e.pageY>i+n){var s=r.scales["x-axis-0"].ticks.length,l=r.scales["x-axis-0"].paddingLeft,h=(o-l-r.scales["x-axis-0"].paddingRight)/s,c=(e.offsetX-l-r.scales["y-axis-0"].width)/h;if(0<c&&c<s){c=Math.floor(c);var p=this.lineChartLabels[c];this.labelClick.emit(p)}}},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-line-chart",template:'<div style="display: block;">\n  <canvas #chart id="lineChart" baseChart \n      [datasets]="lineChartData"\n      [labels]="lineChartLabels"\n      [options]="lineChartOptions"\n      [colors]="lineChartColors"      \n      [legend]="lineChartLegend"\n      [chartType]="\'line\'"\n      [plugins]="lineChartPlugins"\n      (chartHover)="chartHovered($event)"\n      (chartClick)="chartClicked($event)">\n  </canvas>  \n</div>',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={lineChartOptions:[{type:l.Input}],lineChartLabels:[{type:l.Input}],lineChartLegend:[{type:l.Input}],lineChartData:[{type:l.Input}],lineChartColors:[{type:l.Input}],lineChartPlugins:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}],chart:[{type:l.ViewChild,args:[o.BaseChartDirective]}]},t}(),O=function(){function t(){var e=this;(this.pieChartOptions={},this.pieChartLabels=[],this.pieChartData=[],this.pieChartLegend=!0,this.pieChartPlugins=[],this.pieChartColors=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.pieChartColors&&0!=Object.keys(this.pieChartColors).length)||(this.pieChartColors=[{backgroundColor:[]}],(new C).globalColors.forEach(function(t){e.pieChartColors[0].backgroundColor.push(t.backgroundColor)}));this.pieChartOptions&&0!=Object.keys(this.pieChartOptions).length||(this.pieChartOptions=(new u).pieChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.pieChartOptions=d.populateChartConfig(this.pieChartOptions,this.simpleChartConfig)))}return t.prototype.ngOnInit=function(){this.pieChartPlugins||(this.pieChartPlugins=[]),this.pieChartPlugins.push(i)},t.prototype.chartClicked=function(t){t.event;var e=t.active;0<e.length&&this.chartClick.emit(e[0])},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-pie-chart",template:'<div style="display: block;">\n  <canvas baseChart\n    [data]="pieChartData"\n    [labels]="pieChartLabels"    \n    [options]="pieChartOptions"\n    [plugins]="pieChartPlugins"    \n    [colors]="pieChartColors" \n    [legend]="pieChartLegend"\n    [chartType]="\'pie\'"    \n    (chartHover)="chartHovered($event)"\n    (chartClick)="chartClicked($event)">\n  </canvas>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={pieChartOptions:[{type:l.Input}],pieChartLabels:[{type:l.Input}],pieChartData:[{type:l.Input}],pieChartLegend:[{type:l.Input}],pieChartPlugins:[{type:l.Input}],pieChartColors:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}]},t}(),x=function(){function t(){this.scatterChartOptions={},this.scatterChartColors=[],this.simpleChartConfig={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.scatterChartColors&&0!=Object.keys(this.scatterChartColors).length||(this.scatterChartColors=(new C).globalColors,this.scatterChartColors.forEach(function(t){t.pointRadius=6,t.pointHoverRadius=6})),this.scatterChartOptions&&0!=Object.keys(this.scatterChartOptions).length||(this.scatterChartOptions=(new u).scatterChartOptions,this.simpleChartConfig&&0<Object.keys(this.simpleChartConfig).length&&(this.scatterChartOptions=d.populateChartConfig(this.scatterChartOptions,this.simpleChartConfig)))}return t.prototype.ngOnInit=function(){},t.prototype.chartClicked=function(t){t.event;var e=t.active;0<e.length&&this.chartClick.emit(e[0])},t.prototype.chartHovered=function(t){t.event;var e=t.active;0<e.length&&this.chartHover.emit(e[0])},t.decorators=[{type:l.Component,args:[{selector:"lib-scatter-chart",template:'<div style="display: block">\n  <canvas baseChart\n    [datasets]="scatterChartData"\n    [options]="scatterChartOptions"\n    [labels]="scatterChartLabels"\n    [colors]="scatterChartColors"\n    [chartType]="\'scatter\'"\n    (chartHover)="chartHovered($event)"\n    (chartClick)="chartClicked($event)">\n  </canvas>\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={scatterChartOptions:[{type:l.Input}],scatterChartLabels:[{type:l.Input}],scatterChartData:[{type:l.Input}],scatterChartColors:[{type:l.Input}],simpleChartConfig:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}]},t}(),k=function(){function t(){this.selectedSegmentationIndex=-1,this.chartClick=new l.EventEmitter}return t.prototype.ngOnInit=function(){var C,u=this,t=20,e=90,a=960-e-90,r=700-t-30,f=d3.select("svg").append("g").attr("transform","translate("+e+","+t+")"),g=0,b=750,y=d3.tree().size([r,a]);(C=d3.hierarchy(this.treeData,function(t){return t.children})).x0=r/2,C.y0=0,function v(a){var t=y(C);var e=t.descendants();var r=t.descendants().slice(1);e.forEach(function(t,e){switch(console.log(e+", d.depth "+t.depth),t.y=0,t.depth){case 6:t.y+=90;case 5:t.y+=90;case 4:t.y+=90;case 3:t.y+=90;case 2:t.y+=50;case 1:t.y+=50;case 0:t.y+=-70;break;default:t.y=90*t.depth}});var i=f.selectAll("g.node").data(e,function(t){return t.id||(t.id=++g)});var o=i.enter().append("g").attr("class","node").attr("id",function(t){return"g-"+t.id}).attr("transform",function(t){return"translate("+a.y0+","+a.x0+")"}).on("click",d);o.append("circle").attr("class","node").attr("r",1e-6).style("fill",function(t){return t.children||t._children?"#fff":"#82b1c6"});o.append("text").attr("dy",".35em").attr("x",function(t){return-13}).attr("text-anchor",function(t){return"end"}).text(function(t){return t.data.name});var n=o.merge(i);n.transition().duration(b).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});n.select("circle.node").attr("r",10).style("fill",function(t){return t.children||t._children?"#fff":"#82b1c6"}).attr("cursor","pointer");var s=i.exit().transition().duration(b).attr("transform",function(t){return"translate("+a.y+","+a.x+")"}).remove();s.select("circle").attr("r",1e-6);s.select("text").style("fill-opacity",1e-6);var l=f.selectAll("path.link").data(r,function(t){return t.id});var h=l.enter().insert("path","g").attr("class","link").attr("d",function(t){var e={x:a.x0,y:a.y0};return p(e,e)});var c=h.merge(l);c.transition().duration(b).attr("d",function(t){return p(t,t.parent)});l.exit().transition().duration(b).attr("d",function(t){var e={x:a.x,y:a.y};return p(e,e)}).remove();e.forEach(function(t){t.x0=t.x,t.y0=t.y});function p(t,e){var a="M "+t.y+" "+t.x+"\n            C "+(t.y+e.y)/2+" "+t.x+",\n              "+(t.y+e.y)/2+" "+e.x+",\n              "+e.y+" "+e.x;return a}function d(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),v(t);var e=-1;d3.selectAll("g.node").attr("class","node"),(t.data.index||0<=t.data.index)&&(e=t.data.index,d3.select("#g-"+t.id).attr("class","node select"),d3.select("#g-"+t.id).select("circle.node").style("fill","#f398b0")),u.selectedSegmentationIndex=e,u.chartClick.emit(t)}}(C)},t.decorators=[{type:l.Component,args:[{selector:"lib-tree-layout-chart",template:'<svg width="100%" height="700" viewBox="0 0 500 700" preserveAspectRatio="xMidYMid meet">  \n  <rect fill="#fbfbfb" width="100%" height="100%"></rect>\n</svg>',styles:[":host ::ng-deep .node circle{fill:#fff;stroke:#247ba0;stroke-width:1px}:host ::ng-deep .node.select circle{stroke-width:3px;fill:#f398b0;stroke:#eb547c}:host ::ng-deep .node text{font:10px sans-serif}:host ::ng-deep .link{fill:none;stroke:#ccc;stroke-width:2px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={selectedSegmentationIndex:[{type:l.Input}],chartClick:[{type:l.Output}],treeData:[{type:l.Input}]},t}(),L=function(){function t(){this.generatedChartData=[{type:"line",label:"",data:[{y:0,x:0},{y:0,x:0}]}],this.generatedChartColors=[{fill:!0,backgroundColor:"#000000",pointRadius:0}],this.variableWidthChartLegend=!0,this.variableWidthChartOptions={},this.limitLineColor={fill:!1,borderColor:"rgba(235, 84, 124, 1)",borderWidth:1.5,borderDash:[5,5],pointRadius:0,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235, 84, 124, 1)",cubicInterpolationMode:"monotone"},this.volumeAllocaitonColors=[["#45a090","#5fbaaa","#82c9bd","#a6d8d0","#cae8e3"],["#2a90bb","#35a3d2","#5fb6db","#7bc3e1","#a4d6eb"],["#ec5f85"],["#a6a6a5","#b7b7b6","#c8c8c7","#d9d9d8"]]}return t.prototype.ngOnInit=function(){this.variableWidthChartOptions&&0!=Object.keys(this.variableWidthChartOptions).length||(this.variableWidthChartOptions=(new u).variableWidthChartOptions),this.buildChartData()},t.prototype.buildChartData=function(){if(this.variableWidthChartData){this.generatedChartData=[],this.generatedChartColors=[];var a=this,r=0,i=1,o=-1;this.variableWidthChartData.map(function(t){var e=r+t.xValue;a.generatedChartData.push({type:"line",label:t.label,data:[{x:r,y:t.yValue},{x:e,y:t.yValue}]}),o==t.state?i++:(o=t.state,i=0),a.generatedChartColors.push(a.getVolumeAllocationColor(t.state,i)),r=e}),this.limitLineData&&(this.generatedChartData.unshift({type:"line",label:this.limitLineData.label,data:[{x:this.limitLineData.xValue,y:0},{x:this.limitLineData.xValue,y:1250}]}),this.generatedChartColors.unshift(this.limitLineColor)),a.chart.update()}},t.prototype.getVolumeAllocationColor=function(t,e){this.volumeAllocaitonColors[0][0];var a=this.volumeAllocaitonColors[0][0],r=this.volumeAllocaitonColors[t];return{fill:!0,backgroundColor:a=r[e%r.length],borderColor:a,borderWidth:1,pointRadius:0,pointHitRadius:10,pointHoverRadius:5,pointHoverBorderWidth:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(235,84,124,1)",cubicInterpolationMode:"monotone"}},t.decorators=[{type:l.Component,args:[{selector:"lib-variable-width-chart",template:'<div style="display: block">\n  <canvas #chart baseChart height="150"\n    [datasets]="generatedChartData"\n    [options]="variableWidthChartOptions"\n    [colors]="generatedChartColors"\n    [legend]="variableWidthChartLegend"\n    [chartType]="\'bubble\'">\n  </canvas>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={chart:[{type:l.ViewChild,args:[o.BaseChartDirective]}],variableWidthChartData:[{type:l.Input}],limitLineData:[{type:l.Input}],variableWidthChartLegend:[{type:l.Input}],variableWidthChartOptions:[{type:l.Input}]},t}(),w=function(){function t(){this.waterfallChartOptions={},this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.labelClick=new l.EventEmitter,this.waterfallData=[],this.waterfallChartConfig={displayModeBar:!1,displaylogo:!1,modeBarButtonsToRemove:["pan2d","lasso2d"]}}return t.prototype.ngOnInit=function(){this.dataProcessing()},t.prototype.ngOnChanges=function(t){t.waterfallChartData&&this.dataProcessing()},t.prototype.dataProcessing=function(){var l=this;this.waterfallChartOptions&&0!=Object.keys(this.waterfallChartOptions).length||(this.waterfallChartOptions=(new u).waterfallChartOptions);var h=0,c=0,p=this;if(this.waterfallChartData.forEach(function(t){var e=[],a=[],r=[],i=[],o=[],n=0;t.waterfallItemData.forEach(function(t){t.hidden?(e.push("absolute"),r.push(""),i.push(0),o.push("none")):(e.push(t.measure),r.push(t.dataLabel),i.push(t.value),o.push("all")),t.compared&&(c=n),a.push(t.itemlabel),n++}),p.waterfallExtendedChartData&&p.waterfallExtendedChartData[h]&&(e.push("absolute"),r.push(""),i.push(0),o.push("none"),a.push(""),p.waterfallExtendedChartData[h].waterfallItemData.forEach(function(t){t.hidden?(e.push("absolute"),r.push(""),i.push(0),o.push("none")):(e.push(t.measure),r.push(t.dataLabel),i.push(t.value),o.push("all")),a.push(t.itemlabel)})),t.connectorColor||(t.connectorColor="rgba(36,123,160,0.5)"),t.connectorWidth||(t.connectorWidth=1);var s={name:t.name,type:"waterfall",orientation:"v",measure:e,x:a,textposition:"outside",text:r,y:i,connector:{line:{color:t.connectorColor,width:t.connectorWidth}},hoverinfo:o,decreasing:{marker:{color:t.decreasingColor}},increasing:{marker:{color:t.increasingColor}},totals:{marker:{color:t.totalsColor}}};l.waterfallData.push(s),h++}),this.waterfallExtendedChartData){var i=0,o=0,n=0;this.waterfallData.forEach(function(e){var a=0,r=0;e.measure.forEach(function(t){"absolute"==t?a=e.y[r]:"relative"==t&&(a+=e.y[r]),o<a&&(o=a),a<i&&(i=a),r==c&&(n=a),r++})}),this.waterfallChartOptions.shapes=[{x0:this.waterfallChartData[0].waterfallItemData.length,x1:this.waterfallChartData[0].waterfallItemData.length,y0:i,y1:o,line:{dash:"solid",color:"#444444",width:3},type:"line",xref:"x",yref:"y",opacity:.3,fillcolor:"#7f7f7f"},{x0:c,x1:this.waterfallChartData[0].waterfallItemData.length+1,y0:n,y1:n,line:{dash:"dash",color:"#444444",width:3},type:"line",xref:"x",yref:"y",opacity:.3,fillcolor:"#7f7f7f"}],this.waterfallChartOptions.annotations=[{x:Math.ceil(this.waterfallChartData[0].waterfallItemData.length/2),y:1.1*o,text:"<b>"+this.waterfallChartData[0].name+"</b>",font:{color:"rgb(60, 55, 201)"},showarrow:!1},{x:this.waterfallChartData[0].waterfallItemData.length+Math.ceil(this.waterfallExtendedChartData[0].waterfallItemData.length/2),y:1.1*o,text:"<b>"+this.waterfallExtendedChartData[0].name+"</b>",font:{color:"rgb(60, 55, 201)"},showarrow:!1}]}},t.prototype.chartClicked=function(t){t instanceof MouseEvent||this.chartClick.emit(t)},t.prototype.chartHovered=function(t){this.chartHover.emit(t)},t.prototype.chartAfterPlotted=function(t){var e=this;n.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){e.labelClick.emit(t.text)})},t.decorators=[{type:l.Component,args:[{selector:"lib-waterfall-chart",template:'<div>\n    <plotly-plot [data]="waterfallData" [layout]="waterfallChartOptions" [config]="waterfallChartConfig" \n      [revision]="0" [debug]="true" [useResizeHandler]="true"\n      (click)="chartClicked($event)" (hover)="chartHovered($event)" (afterPlot)="chartAfterPlotted($event)">\n    </plotly-plot>\n</div>\n',styles:[":host /deep/ .xaxislayer-above{cursor:pointer;pointer-events:all}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={waterfallChartData:[{type:l.Input}],waterfallExtendedChartData:[{type:l.Input}],waterfallChartOptions:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}],labelClick:[{type:l.Output}]},t}(),I=function F(){this.decreasingColor=C.globalBackgroundColors[0],this.increasingColor=C.globalBackgroundColors[1],this.totalsColor=C.globalBackgroundColors[2]},D=function _(){this.hidden=!1,this.compared=!1},H=function(){function t(){this.plugins=[s],this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter,this.options={plugins:{datalabels:{display:!1},waterFallPlugin:{stepLines:{enabled:!1}}}}}return t.prototype.ngOnInit=function(){this.adaptDataForPlugin()},t.prototype.ngOnChanges=function(t){},t.prototype.adaptDataForPlugin=function(){if(this.waterfallPluginChartData){var r=[],i=0;this.waterfallPluginChartData.forEach(function(t,e){if(t.total?i=t.data:(t.data<0&&(i+=t.data),r.push({data:[i],waterfall:{dummyStack:!0},stack:""+e}),0<t.data&&(i+=t.data)),t.backgroundColor)r.push({label:t.label,data:[Math.abs(t.data)],backgroundColor:t.backgroundColor,stack:""+e});else{var a=[];a=t.total?["rgba(255, 99, 132, 0.5)"]:0<t.data?["rgba(54, 162, 235, 0.5)"]:["rgba(255, 206, 86, 0.5)"],r.push({label:t.label,data:[Math.abs(t.data)],backgroundColor:a,stack:""+e})}}),this.chartData={labels:["Waterfall Model"],datasets:r}}},t.prototype.chartClicked=function(t){this.chartClick.emit(t)},t.prototype.chartHovered=function(t){this.chartHover.emit(t)},t.decorators=[{type:l.Component,args:[{selector:"lib-waterfall-plugin-chart",template:'<lib-base-chart type="bar" [data]="chartData" [plugins]="plugins" [options]="options"\n  (chartHover)="chartHovered($event)"\n  (chartClick)="chartClicked($event)">\n</lib-base-chart>\n',styles:[""]}]}],t.ctorParameters=function(){return[]},t.propDecorators={waterfallPluginChartData:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}]},t}(),E=function(){function t(){this.chartClick=new l.EventEmitter,this.chartHover=new l.EventEmitter}return t.prototype.ngOnInit=function(){var t,a=this;this.options?((t=Object.assign(Object.create(Object.getPrototypeOf(this.options)),this.options)).onClick=function(t,e){a.chartClicked(t,e)},t.hover=t.hover||{},t.hover.onHover=function(t,e){a.chartHovered(t,e)},this._options=t):((t={onClick:function(t,e){a.chartClicked(t,e)}}).hover=t.hover||{},t.hover.onHover=function(t,e){a.chartHovered(t,e)},this._options=t);this._chart=new h(this.canvasRef.nativeElement,{type:this.type,data:this.data,options:this._options,plugins:this.plugins})},t.prototype.chartClicked=function(t,e){this.chartClick.emit(e)},t.prototype.chartHovered=function(t,e){this.chartHover.emit(e)},t.prototype.ngOnChanges=function(t){},t.prototype.ngOnDestroy=function(){this._chart&&this._chart.destroy()},t.decorators=[{type:l.Component,args:[{selector:"lib-base-chart",template:'<div class="chart-container" style="position: relative; width: 100%; height: 100%">\n  <canvas #chartCanvas></canvas>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={canvasRef:[{type:l.ViewChild,args:["chartCanvas"]}],type:[{type:l.Input}],data:[{type:l.Input}],options:[{type:l.Input}],plugins:[{type:l.Input}],chartClick:[{type:l.Output}],chartHover:[{type:l.Output}]},t}();a.PlotlyModule.plotlyjs=r;var P=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[p,f,g,y,v,m,O,x,k,L,w,H,E],imports:[e.CommonModule,o.ChartsModule,a.PlotlyModule],exports:[p,f,g,y,v,m,O,x,k,L,w,H,E]}]}],t}();t.ChartLibService=c,t.ChartLibComponent=p,t.ChartLibModule=P,t.BarChartComponent=f,t.SimpleChartConfig=d,t.GlobalChartColors=C,t.GlobalChartOptions=u,t.BoxPlotChartComponent=g,t.BoxPlotChartData=b,t.CombinedCategoryChartComponent=y,t.CombinedMeasureChartComponent=v,t.LineChartComponent=m,t.PieChartComponent=O,t.ScatterChartComponent=x,t.TreeLayoutChartComponent=k,t.VariableWidthChartComponent=L,t.WaterfallChartComponent=w,t.WaterfallChartData=I,t.WaterfallItemData=D,t.WaterfallPluginChartComponent=H,t.BaseChartComponent=E,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=chart-lib.umd.min.js.map